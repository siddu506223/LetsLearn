<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curious Elephant Academy - Welcome to RS Foundation</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
    <!-- Title Screen View -->
    <div id="titleView" class="container view-active">
        <div class="title-screen">
            <!-- Math & Science Formula Background -->
            <svg class="formula-background" viewBox="0 0 1200 800" preserveAspectRatio="xMidYMid slice">
                <defs>
                    <pattern id="formulas" x="0" y="0" width="200" height="200" patternUnits="userSpaceOnUse" opacity="0.1">
                        <text x="10" y="30" font-size="16" fill="#333">E=mcÂ²</text>
                        <text x="10" y="60" font-size="14" fill="#333">Ï€ â‰ˆ 3.14159</text>
                        <text x="10" y="90" font-size="14" fill="#333">âˆ« dx</text>
                        <text x="10" y="120" font-size="16" fill="#333">aÂ² + bÂ² = cÂ²</text>
                        <text x="10" y="150" font-size="14" fill="#333">f(x) = ax + b</text>
                        <text x="10" y="180" font-size="14" fill="#333">âˆ‘ n=1</text>
                    </pattern>
                </defs>
                <rect width="1200" height="800" fill="url(#formulas)"/>
                <!-- Additional scattered formulas -->
                <text x="100" y="120" font-size="24" fill="#667eea" opacity="0.08">âˆ‡Â²Ï† = 0</text>
                <text x="900" y="150" font-size="20" fill="#667eea" opacity="0.08">Hâ‚‚O</text>
                <text x="150" y="650" font-size="22" fill="#667eea" opacity="0.08">âˆ‚u/âˆ‚t</text>
                <text x="1000" y="700" font-size="18" fill="#667eea" opacity="0.08">DNA</text>
                <text x="500" y="100" font-size="20" fill="#667eea" opacity="0.08">âˆšx</text>
            </svg>
            <div class="title-content">
                <div class="elephant-decorator left-elephant">ğŸ˜</div>
                <h1 class="title-main">Curious Elephant Academy</h1>
                <p class="title-subtitle">by RS Foundation</p>
                <div class="title-divider"></div>
                <div class="subject-badges">
                    <span class="badge-reading">ğŸ“– Reading</span>
                    <span class="badge-math">ğŸ”¢ Math</span>
                    <span class="badge-science">ğŸ”¬ Science</span>
                    <span class="badge-writing">âœï¸ Writing</span>
                    <span class="badge-history">ğŸ“š History</span>
                </div>
                <p class="title-description">Discover, Learn, and Grow</p>
                <div class="button-group">
                    <button onclick="goToLoginScreen('student')" class="btn-primary btn-large btn-pulse">ğŸ‘¦ Student Login</button>
                    <button onclick="goToLoginScreen('parent')" class="btn-secondary btn-large">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Parent Dashboard</button>
                </div>
                <div class="elephant-decorator right-elephant">ğŸ˜</div>
            </div>
        </div>
    </div>

    <!-- Login/Signup View -->
    <div id="loginView" class="container view-hidden">
        <div class="login-container">
            <!-- Kids Studying Background -->
            <svg class="kids-studying-background" viewBox="0 0 1200 800" preserveAspectRatio="xMidYMid slice">
                <defs>
                    <linearGradient id="skyGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#E0F6FF;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#FFE8F0;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <rect width="1200" height="800" fill="url(#skyGradient)"/>
                
                <!-- Clouds -->
                <ellipse cx="150" cy="80" rx="40" ry="25" fill="white" opacity="0.8"/>
                <ellipse cx="180" cy="90" rx="50" ry="30" fill="white" opacity="0.7"/>
                <ellipse cx="900" cy="100" rx="45" ry="28" fill="white" opacity="0.75"/>
                <ellipse cx="950" cy="110" rx="55" ry="32" fill="white" opacity="0.7"/>
                
                <!-- Sun -->
                <circle cx="1000" cy="80" r="35" fill="#FFD700" opacity="0.3"/>
                
                <!-- Book on table -->
                <rect x="100" y="350" width="120" height="80" fill="#8B4513" opacity="0.3"/>
                <rect x="105" y="355" width="110" height="70" fill="#FF6B9D" opacity="0.25"/>
                
                <!-- Pencil -->
                <line x1="250" y1="340" x2="280" y2="380" stroke="#FFD700" stroke-width="4" opacity="0.3"/>
                
                <!-- Kid sitting (left) -->
                <circle cx="200" cy="280" r="25" fill="#FFB6A3" opacity="0.25"/>
                <rect x="180" y="310" width="40" height="60" fill="#FF69B4" opacity="0.2"/>
                <rect x="170" y="370" width="15" height="40" fill="#FFB6A3" opacity="0.2"/>
                <rect x="185" y="370" width="15" height="40" fill="#FFB6A3" opacity="0.2"/>
                
                <!-- Kid standing (center) -->
                <circle cx="600" cy="250" r="28" fill="#FFB6A3" opacity="0.25"/>
                <rect x="575" y="285" width="50" height="70" fill="#4169E1" opacity="0.2"/>
                <rect x="560" y="360" width="18" height="45" fill="#FFB6A3" opacity="0.2"/>
                <rect x="592" y="360" width="18" height="45" fill="#FFB6A3" opacity="0.2"/>
                
                <!-- Kid with tablet (right) -->
                <circle cx="950" cy="290" r="26" fill="#FFB6A3" opacity="0.25"/>
                <rect x="927" y="320" width="46" height="65" fill="#32CD32" opacity="0.2"/>
                <rect x="920" y="365" width="16" height="42" fill="#FFB6A3" opacity="0.2"/>
                <rect x="948" y="365" width="16" height="42" fill="#FFB6A3" opacity="0.2"/>
                <rect x="930" y="310" width="40" height="30" fill="#87CEEB" opacity="0.25"/>
                
                <!-- Light bulb (idea) -->
                <circle cx="500" cy="120" r="15" fill="#FFD700" opacity="0.2"/>
                <rect x="495" y="135" width="10" height="15" fill="#8B4513" opacity="0.15"/>
                
                <!-- Stars -->
                <text x="80" y="150" font-size="20" opacity="0.15">â­</text>
                <text x="400" y="90" font-size="18" opacity="0.15">â­</text>
                <text x="1050" y="200" font-size="22" opacity="0.15">â­</text>
            </svg>
            <div class="login-box">
                <div class="login-elephant">ğŸ˜</div>
                <h1 id="loginTitle">Welcome to Curious Elephant Academy</h1>
                <p class="login-subtitle">by RS Foundation</p>
                <div id="studentTabs" class="login-tabs">
                    <button id="loginTab" class="tab-btn active" onclick="switchAuthTab('login')">Login</button>
                    <button id="signupTab" class="tab-btn" onclick="switchAuthTab('signup')">Sign Up</button>
                </div>
                <div id="parentTabs" class="login-tabs" style="display: none;">
                    <button id="parentLoginTab" class="tab-btn active" onclick="switchAuthTab('parent-login')">Parent Login</button>
                    <button id="parentSignupTab" class="tab-btn" onclick="switchAuthTab('parent-signup')">Parent Sign Up</button>
                </div>
                
                <!-- Student Login Form -->
                <div id="loginForm" class="auth-form active-form">
                    <input type="email" id="loginEmail" placeholder="Email" required>
                    <input type="password" id="loginPassword" placeholder="Password" required>
                    <button onclick="handleLogin()" class="btn-primary btn-full">Login</button>
                    <div class="divider-or">OR</div>
                    <button onclick="googleSignIn()" class="btn-google btn-full">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%234285F4' d='M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z'/%3E%3Cpath fill='%2334A853' d='M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z'/%3E%3Cpath fill='%23FBBC05' d='M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z'/%3E%3Cpath fill='%23EA4335' d='M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z'/%3E%3C/svg%3E" alt="Google" class="google-icon">
                        Sign in with Google
                    </button>
                    <button onclick="backToTitle()" class="btn-secondary btn-full">Back</button>
                </div>
                
                <!-- Signup Form -->
                <div id="signupForm" class="auth-form">
                    <div class="form-row">
                        <input type="text" id="signupFirstName" placeholder="First Name" required>
                        <input type="text" id="signupMiddleName" placeholder="Middle Name (Optional)">
                    </div>
                    <input type="text" id="signupLastName" placeholder="Last Name" required>
                    <select id="signupGrade" required>
                        <option value="">Select Your Grade</option>
                        <option value="K">Kindergarten</option>
                        <option value="1">1st Grade</option>
                        <option value="2">2nd Grade</option>
                        <option value="3">3rd Grade</option>
                        <option value="4">4th Grade</option>
                        <option value="5">5th Grade</option>
                        <option value="6">6th Grade</option>
                        <option value="7">7th Grade</option>
                        <option value="8">8th Grade</option>
                        <option value="9">9th Grade</option>
                        <option value="10">10th Grade</option>
                        <option value="11">11th Grade</option>
                        <option value="12">12th Grade</option>
                    </select>
                    <input type="email" id="signupEmail" placeholder="Email" required>
                    <input type="password" id="signupPassword" placeholder="Password (min 6 chars)" required>
                    <input type="password" id="signupConfirmPassword" placeholder="Confirm Password" required>
                    <button onclick="handleSignup()" class="btn-primary btn-full">Create Account</button>
                    <button onclick="backToTitle()" class="btn-secondary btn-full">Back</button>
                </div>

                <!-- Parent Login Form -->
                <div id="parentLoginForm" class="auth-form">
                    <input type="email" id="parentLoginEmail" placeholder="Email" required>
                    <input type="password" id="parentLoginPassword" placeholder="Password" required>
                    <button onclick="handleParentLogin()" class="btn-primary btn-full">Login</button>
                    <button onclick="backToTitle()" class="btn-secondary btn-full">Back</button>
                </div>

                <!-- Parent Signup Form -->
                <div id="parentSignupForm" class="auth-form">
                    <input type="text" id="parentFirstName" placeholder="First Name" required>
                    <input type="text" id="parentLastName" placeholder="Last Name" required>
                    <input type="email" id="parentSignupEmail" placeholder="Email" required>
                    <input type="password" id="parentSignupPassword" placeholder="Password (min 6 chars)" required>
                    <input type="password" id="parentSignupConfirmPassword" placeholder="Confirm Password" required>
                    <button onclick="handleParentSignup()" class="btn-primary btn-full">Create Account</button>
                    <button onclick="backToTitle()" class="btn-secondary btn-full">Back</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Parent Dashboard View -->
    <div id="parentDashboardView" class="container view-hidden">
        <div class="dashboard-header">
            <div class="header-welcome">
                <div class="header-elephant">ğŸ˜</div>
                <div>
                    <h1 id="parentName">Parent Dashboard</h1>
                    <p class="foundation-text">Track Your Child's Learning Progress</p>
                </div>
            </div>
            <div class="dashboard-buttons">
                <button onclick="parentLogout()" class="btn-secondary">Logout</button>
            </div>
        </div>

        <div id="childrenContainer" class="dashboard-grid">
            <!-- Children will be dynamically loaded here -->
        </div>

        <div class="parent-report-section">
            <h2>ğŸ“Š Weekly Reports & Analytics</h2>
            <div id="reportsContainer">
                <!-- Reports will be generated here -->
            </div>
        </div>
    </div>

    <!-- User Management View - REMOVED (no longer needed) -->

    <!-- Dashboard View for Kindergarten -->
    <div id="dashboardView" class="container view-hidden">
        <div class="dashboard-header">
            <div class="header-welcome">
                <div id="userAvatar" class="user-avatar">ğŸ˜</div>
                <div>
                    <h1 id="studentName"></h1>
                    <p class="foundation-text">Curious Elephant Academy - RS Foundation</p>
                </div>
            </div>
            <div class="points-display">
                <span id="pointsCount">0</span> / 30 Points
                <span id="minigameStatus"></span>
            </div>
            <div class="dashboard-buttons">
                <button onclick="viewProfile()" class="btn-info">ğŸ‘¤ Profile</button>
                <button onclick="viewCurriculum()" class="btn-info">ğŸ“– Curriculum</button>
                <button onclick="viewLeaderboard()" class="btn-info">ğŸ† Leaderboard</button>
                <button onclick="openShop()" class="btn-warning">ğŸ›ï¸ Game Shop</button>
                <button id="adminButton" onclick="toggleAdminPanel()" class="btn-secondary" style="display: none;">âš™ï¸ Admin</button>
                <button onclick="logout()" class="btn-secondary">Logout</button>
            </div>
        </div>

        <div class="dashboard-grid">
            <h2 style="grid-column: 1/-1; margin-bottom: 20px;">ğŸ“š Your Courses by Grade</h2>
            <div style="grid-column: 1/-1; display: flex; gap: 10px; margin-bottom: 20px;">
                <button onclick="showGradeCourses()" class="btn-primary" style="padding: 10px 20px; flex: 1;">ğŸ“š Grades K-8</button>
                <button onclick="showHighSchoolCourses()" class="btn-secondary" style="padding: 10px 20px; flex: 1;">ğŸ“ High School</button>
            </div>
            <div id="gradeCoursesContainer"></div>
            <div id="highSchoolCoursesContainer" style="display: none; grid-column: 1/-1;"></div>
        </div>

        <div class="dashboard-grid" id="subjectsSection" style="display: none; margin-top: 40px;">
            <div style="grid-column: 1/-1; display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <button onclick="backToCourses()" class="btn-secondary" style="padding: 10px 20px;">â† Back to Courses</button>
                <h2 style="margin: 0;">ğŸ“ Select a Subject</h2>
                <div style="width: 100px;"></div>
            </div>
            <div class="subject-card reading-card">
                <div class="card-elephant">ğŸ˜</div>
                <h2>ğŸ“– Reading</h2>
                <div class="difficulty-buttons">
                    <button onclick="startQuiz('reading', 'easy')">Easy</button>
                    <button onclick="startQuiz('reading', 'medium')">Medium</button>
                    <button onclick="startQuiz('reading', 'hard')">Advanced</button>
                </div>
            </div>

            <div class="subject-card math-card">
                <div class="card-elephant">ğŸ˜</div>
                <h2>ğŸ”¢ Math</h2>
                <div class="difficulty-buttons">
                    <button onclick="startQuiz('math', 'easy')">Easy</button>
                    <button onclick="startQuiz('math', 'medium')">Medium</button>
                    <button onclick="startQuiz('math', 'hard')">Advanced</button>
                </div>
            </div>

            <div class="subject-card science-card">
                <div class="card-elephant">ğŸ˜</div>
                <h2>ğŸ”¬ Science</h2>
                <div class="difficulty-buttons">
                    <button onclick="startQuiz('science', 'easy')">Easy</button>
                    <button onclick="startQuiz('science', 'medium')">Medium</button>
                    <button onclick="startQuiz('science', 'hard')">Advanced</button>
                </div>
            </div>

            <div class="subject-card writing-card">
                <div class="card-elephant">ğŸ˜</div>
                <h2>âœï¸ Writing</h2>
                <div class="difficulty-buttons">
                    <button onclick="startQuiz('writing', 'easy')">Easy</button>
                    <button onclick="startQuiz('writing', 'medium')">Medium</button>
                    <button onclick="startQuiz('writing', 'hard')">Advanced</button>
                </div>
            </div>

            <div class="subject-card history-card">
                <div class="card-elephant">ğŸ˜</div>
                <h2>ğŸ“š History</h2>
                <div class="difficulty-buttons">
                    <button onclick="startQuiz('history', 'easy')">Easy</button>
                    <button onclick="startQuiz('history', 'medium')">Medium</button>
                    <button onclick="startQuiz('history', 'hard')">Advanced</button>
                </div>
            </div>
        </div>

        <div id="minigameCard" class="section" style="display: none;">
            <h2>ğŸ® Minigame (Unlocked!)</h2>
            <p>You've earned 30 points! Click below to play a fun minigame.</p>
            <button onclick="playMinigame()" class="btn-success">Play Minigame</button>
        </div>

        <div id="assignmentsSection" style="display: none;">
            <h2>Creative & Physical Activities (2nd Grade)</h2>
            <div class="dashboard-grid">
                <div class="subject-card">
                    <h3>ğŸ¨ Art</h3>
                    <p>Learn about colors, shapes, and creativity</p>
                    <button onclick="viewAssignments('art')" class="btn-info">View Assignments</button>
                </div>

                <div class="subject-card">
                    <h3>ğŸµ Music</h3>
                    <p>Explore instruments and rhythm</p>
                    <button onclick="viewAssignments('music')" class="btn-info">View Assignments</button>
                </div>

                <div class="subject-card">
                    <h3>âš½ Physical Education</h3>
                    <p>Stay active and healthy</p>
                    <button onclick="viewAssignments('pe')" class="btn-info">View Assignments</button>
                </div>
            </div>
        </div>

        <div id="boardGamesSection" style="display: none;">
            <h2>ğŸ§  Board & Logic Strengthening Games</h2>
            <p>Challenge your mind with strategic games that develop problem-solving and critical thinking skills.</p>
            <button onclick="viewBoardGames()" class="btn-success" style="margin-top: 10px; font-size: 1.1em; padding: 12px 24px;">ğŸ® Play Board Games</button>
        </div>

        <div class="section">
            <h2>ğŸ“š Explore Other Grades</h2>
            <p>See what students in other grades are learning!</p>
            <div class="grade-explorer-grid">
                <button onclick="viewGradeContent('Kindergarten')" class="grade-btn">ğŸ‘¶ Kindergarten</button>
                <button onclick="viewGradeContent('1st grade')" class="grade-btn">1ï¸âƒ£ 1st Grade</button>
                <button onclick="viewGradeContent('2nd grade')" class="grade-btn">2ï¸âƒ£ 2nd Grade</button>
                <button onclick="viewGradeContent('3rd grade')" class="grade-btn">3ï¸âƒ£ 3rd Grade</button>
                <button onclick="viewGradeContent('4th grade')" class="grade-btn">4ï¸âƒ£ 4th Grade</button>
                <button onclick="viewGradeContent('5th grade')" class="grade-btn">5ï¸âƒ£ 5th Grade</button>
                <button onclick="viewGradeContent('6th grade')" class="grade-btn">6ï¸âƒ£ 6th Grade</button>
                <button onclick="viewGradeContent('7th grade')" class="grade-btn">7ï¸âƒ£ 7th Grade</button>
                <button onclick="viewGradeContent('8th grade')" class="grade-btn">8ï¸âƒ£ 8th Grade</button>
                <button onclick="viewGradeContent('9th grade')" class="grade-btn">9ï¸âƒ£ 9th Grade</button>
                <button onclick="viewGradeContent('10th grade')" class="grade-btn">ğŸ”Ÿ 10th Grade</button>
                <button onclick="viewGradeContent('11th grade')" class="grade-btn">1ï¸âƒ£1ï¸âƒ£ 11th Grade</button>
                <button onclick="viewGradeContent('12th grade')" class="grade-btn">1ï¸âƒ£2ï¸âƒ£ 12th Grade</button>
            </div>
        </div>
    </div>

    <!-- Curriculum View -->
    <div id="curriculumView" class="container view-hidden">
        <div class="curriculum-header">
            <button onclick="backToDashboard()" class="btn-secondary" style="position: absolute; top: 20px; left: 20px;">â† Back</button>
            <h1 style="text-align: center; margin-top: 20px;">ğŸ“– Curriculum Standards</h1>
            <input type="text" id="curriculumSearch" placeholder="Search curriculum by grade or subject..." style="width: 100%; padding: 10px; margin-top: 15px; border: 2px solid #667eea; border-radius: 8px; font-size: 1rem;">
        </div>
        
        <div class="curriculum-container">
            <div id="curriculumContent" style="padding: 20px;"></div>
        </div>
    </div>

    <!-- Profile View -->
    <div id="profileView" class="container view-hidden">
        <div class="profile-header">
            <button onclick="backToDashboard()" class="btn-secondary" style="position: absolute; top: 20px; left: 20px;">â† Back</button>
            <h1 style="text-align: center; margin-top: 20px;">ğŸ‘¤ My Profile</h1>
        </div>
        
        <div class="profile-container">
            <div class="avatar-section">
                <div id="profileAvatar" class="profile-avatar">ğŸ˜</div>
                <button onclick="openAvatarEditor()" class="btn-primary" style="margin-top: 20px;">âœï¸ Edit Avatar</button>
            </div>
            
            <div class="profile-info">
                <div class="info-row">
                    <label>Name:</label>
                    <span id="profileName"></span>
                </div>
                <div class="info-row">
                    <label>Email:</label>
                    <span id="profileEmail"></span>
                </div>
                <div class="info-row">
                    <label>Grade:</label>
                    <span id="profileGrade"></span>
                </div>
                <div class="info-row">
                    <label>Points:</label>
                    <span id="profilePoints"></span>
                </div>
                <div class="info-row">
                    <label>Member Since:</label>
                    <span id="profileMemberSince"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Avatar Editor Modal -->
    <div id="avatarEditorModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <h2>Choose Your Avatar</h2>
            <div class="avatar-selector">
                <div id="avatarOptions" class="avatar-grid"></div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button onclick="closeAvatarEditor()" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Quiz View -->
    <div id="quizView" class="container view-hidden">
        <div class="quiz-header">
            <div style="display: flex; align-items: center; justify-content: space-between; width: 100%;">
                <div style="font-size: 24px;">ğŸ˜</div>
                <h2 id="quizTitle" style="flex: 1; text-align: center;"></h2>
                <div style="font-size: 24px;">ğŸ¯</div>
            </div>
            <div class="quiz-info">
                <span id="questionNumber"></span>
                <span id="userPointsQuiz">Points: 0</span>
            </div>
        </div>

        <div class="quiz-container">
            <div id="questionDisplay"></div>
            <div id="graphicDisplay" class="graphic-display"></div>
            <div id="optionsDisplay" class="options-grid"></div>
            <div id="resultDisplay" class="result-hidden"></div>
            <div id="explanationDisplay" class="explanation-hidden"></div>
            <div class="quiz-button-group">
                <button id="nextBtn" onclick="nextQuestion()" style="display: none;" class="btn-primary btn-next">â¡ï¸ Next Question</button>
                <button onclick="exitQuiz()" class="btn-secondary">âŒ Exit Quiz</button>
            </div>
        </div>
    </div>

    <!-- Minigame View -->
    <div id="minigameView" class="container view-hidden">
        <div class="minigame-header">
            <h1>ğŸ® Memory Match Game</h1>
            <button onclick="exitMinigame()" class="btn-secondary">Exit Game</button>
        </div>
        <div id="gameBoard" class="game-board"></div>
        <div id="gameMessage"></div>
    </div>

    <!-- Shop View -->
    <div id="shopView" class="container view-hidden">
        <div class="shop-header">
            <h1>ğŸ›ï¸ Game Shop</h1>
            <div>
                <span class="user-points">Your Points: <span id="shopPoints">0</span></span>
                <button onclick="closeShop()" class="btn-secondary">Back to Dashboard</button>
            </div>
        </div>
        <div class="games-grid" id="gamesGrid"></div>
    </div>

    <!-- Assignments View -->
    <div id="assignmentsView" class="container view-hidden">
        <div class="assignments-header">
            <h1 id="assignmentsTitle">Assignments</h1>
            <button onclick="closeAssignments()" class="btn-secondary">Back to Dashboard</button>
        </div>
        <div id="assignmentsList" class="assignments-grid">
            <!-- Assignments will be populated here by JavaScript -->
        </div>
    </div>

    <!-- Leaderboard View -->
    <div id="leaderboardView" class="container view-hidden">
        <div class="leaderboard-header">
            <h1>ğŸ† Global Leaderboard</h1>
            <button onclick="closeLeaderboard()" class="btn-secondary">Back to Dashboard</button>
        </div>
        <table id="leaderboardTable">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Name</th>
                    <th>Points</th>
                    <th>Games Played</th>
                </tr>
            </thead>
            <tbody id="leaderboardBody">
            </tbody>
        </table>
    </div>

    <!-- Board Games View -->
    <div id="boardGamesView" class="container view-hidden">
        <div class="board-games-header">
            <h1>ğŸ§  Board & Logic Strengthening Games</h1>
            <div class="points-display">
                <span id="bgPointsCount">0</span> Points Available
            </div>
            <button onclick="closeBoardGames()" class="btn-secondary">Back to Dashboard</button>
        </div>
        <div id="gamesSelectionGrid" class="games-selection-grid">
            <!-- Games will be populated here by JavaScript -->
        </div>
    </div>

    <!-- Game Play View -->
    <div id="gamePlayView" class="container view-hidden">
        <div class="game-play-header">
            <h1 id="currentGameTitle">Game</h1>
            <button onclick="closeGamePlay()" class="btn-secondary">Back to Games</button>
        </div>
        <div id="gamePlayArea" class="game-play-area">
            <!-- Game content will be displayed here -->
        </div>
    </div>

    <!-- Grade Content View -->
    <div id="gradeContentView" class="container view-hidden">
        <div class="grade-content-header">
            <h1 id="gradeContentTitle">Grade Content</h1>
            <button onclick="backToDashboard()" class="btn-secondary">Back to Dashboard</button>
        </div>
        <div id="gradeContentBody" class="grade-content-body">
            <!-- Grade subjects will be populated here -->
        </div>
    </div>

    <!-- Admin Panel View -->
    <div id="adminPanelView" class="container view-hidden">
        <div class="admin-panel" style="max-height: 90vh; overflow-y: auto;">
            <h2>âš™ï¸ Admin Panel (This Device Only)</h2>
            <p style="color: #666; font-size: 12px;">Only visible on this device. Use with caution.</p>
            
            <!-- Tab Navigation -->
            <div style="display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #ddd; flex-wrap: wrap;">
                <button onclick="switchAdminTab('users')" id="tabUsers" class="btn-info" style="padding: 8px 15px; background-color: #3498db; color: white; border: none; cursor: pointer; border-radius: 0;">ğŸ‘¥ Users</button>
                <button onclick="switchAdminTab('parents')" id="tabParents" class="btn-info" style="padding: 8px 15px; background-color: #95a5a6; color: white; border: none; cursor: pointer; border-radius: 0;">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Parents</button>
            </div>

            <!-- Users Section -->
            <div id="usersAdminSection" class="admin-section" style="display: block;">
                <h3>ğŸ‘¥ Registered Users</h3>
                <button onclick="loadAdminUsers()" class="btn-info" style="padding: 8px 15px; margin-bottom: 10px;">ğŸ”„ Refresh Users</button>
                <div id="adminUsersList" style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                        <thead>
                            <tr style="background-color: #f0f0f0; border-bottom: 2px solid #ddd;">
                                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">ID</th>
                                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">First Name</th>
                                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Email</th>
                                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Grade</th>
                                <th style="padding: 10px; text-align: center; border: 1px solid #ddd;">Action</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <tr><td colspan="5" style="text-align: center; padding: 20px;">Loading users...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Parents Section -->
            <div id="parentsAdminSection" class="admin-section" style="display: none;">
                <h3>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Registered Parents</h3>
                <button onclick="loadAdminParents()" class="btn-info" style="padding: 8px 15px; margin-bottom: 10px;">ğŸ”„ Refresh Parents</button>
                <div id="adminParentsList" style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                        <thead>
                            <tr style="background-color: #f0f0f0; border-bottom: 2px solid #ddd;">
                                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">ID</th>
                                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">First Name</th>
                                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Email</th>
                                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Grade</th>
                                <th style="padding: 10px; text-align: center; border: 1px solid #ddd;">Action</th>
                            </tr>
                        </thead>
                        <tbody id="parentsTableBody">
                            <tr><td colspan="5" style="text-align: center; padding: 20px;">Loading parents...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="admin-section">
                <h3>ğŸ‘¤ Your User ID</h3>
                <p id="adminUserId" style="font-weight: bold; padding: 10px; background: #f0f0f0; border-radius: 5px;"></p>
            </div>

            <button onclick="closeAdminPanel()" class="btn-secondary" style="margin-top: 20px;">Close Admin Panel</button>
        </div>
    </div>

    <!-- Edit User Grade Modal -->
    <div id="editUserModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; flex-direction: column;">
        <div style="background: white; padding: 30px; border-radius: 10px; max-width: 400px; width: 90%;">
            <h3>âœï¸ Edit User Grade</h3>
            <p id="editUserName" style="font-weight: bold; margin: 10px 0;"></p>
            <label style="display: block; margin: 15px 0;">
                New Grade:
                <select id="editUserGradeSelect" style="padding: 8px; width: 100%; margin-top: 5px;">
                    <option value="">Select Grade</option>
                    <option value="Kindergarten">Kindergarten</option>
                    <option value="1st grade">1st grade</option>
                    <option value="2nd grade">2nd grade</option>
                    <option value="3rd grade">3rd grade</option>
                    <option value="4th grade">4th grade</option>
                    <option value="5th grade">5th grade</option>
                    <option value="6th grade">6th grade</option>
                </select>
            </label>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button onclick="saveUserGradeEdit()" class="btn-success" style="flex: 1; padding: 10px;">Save</button>
                <button onclick="closeEditUserModal()" class="btn-secondary" style="flex: 1; padding: 10px;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Edit Parent Grade Modal -->
    <div id="editParentModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; flex-direction: column;">
        <div style="background: white; padding: 30px; border-radius: 10px; max-width: 400px; width: 90%;">
            <h3>âœï¸ Edit Parent Grade</h3>
            <p id="editParentName" style="font-weight: bold; margin: 10px 0;"></p>
            <label style="display: block; margin: 15px 0;">
                New Grade:
                <select id="editParentGradeSelect" style="padding: 8px; width: 100%; margin-top: 5px;">
                    <option value="">Select Grade</option>
                    <option value="Kindergarten">Kindergarten</option>
                    <option value="1st grade">1st grade</option>
                    <option value="2nd grade">2nd grade</option>
                    <option value="3rd grade">3rd grade</option>
                    <option value="4th grade">4th grade</option>
                    <option value="5th grade">5th grade</option>
                    <option value="6th grade">6th grade</option>
                </select>
            </label>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button onclick="saveParentGradeEdit()" class="btn-success" style="flex: 1; padding: 10px;">Save</button>
                <button onclick="closeEditParentModal()" class="btn-secondary" style="flex: 1; padding: 10px;">Cancel</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

