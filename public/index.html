<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curious Elephant Academy - Welcome to RS Foundation</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Title Screen View -->
    <div id="titleView" class="container view-active">
        <div class="title-screen">
            <div class="title-content">
                <div class="elephant-decorator left-elephant">ğŸ˜</div>
                <h1 class="title-main">Curious Elephant Academy</h1>
                <p class="title-subtitle">by RS Foundation</p>
                <div class="title-divider"></div>
                <div class="subject-badges">
                    <span class="badge-reading">ğŸ“– Reading</span>
                    <span class="badge-math">ğŸ”¢ Math</span>
                    <span class="badge-science">ğŸ”¬ Science</span>
                    <span class="badge-writing">âœï¸ Writing</span>
                    <span class="badge-history">ğŸ“š History</span>
                </div>
                <p class="title-description">Discover, Learn, and Grow</p>
                <div class="button-group">
                    <button onclick="goToLoginScreen('student')" class="btn-primary btn-large btn-pulse">ğŸ‘¦ Student Login</button>
                    <button onclick="goToLoginScreen('parent')" class="btn-secondary btn-large">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Parent Dashboard</button>
                </div>
                <div class="elephant-decorator right-elephant">ğŸ˜</div>
            </div>
        </div>
    </div>

    <!-- Login/Signup View -->
    <div id="loginView" class="container view-hidden">
        <div class="login-container">
            <div class="login-box">
                <div class="login-elephant">ğŸ˜</div>
                <h1 id="loginTitle">Welcome to Curious Elephant Academy</h1>
                <p class="login-subtitle">by RS Foundation</p>
                <div id="studentTabs" class="login-tabs">
                    <button id="loginTab" class="tab-btn active" onclick="switchAuthTab('login')">Login</button>
                    <button id="signupTab" class="tab-btn" onclick="switchAuthTab('signup')">Sign Up</button>
                </div>
                <div id="parentTabs" class="login-tabs" style="display: none;">
                    <button id="parentLoginTab" class="tab-btn active" onclick="switchAuthTab('parent-login')">Parent Login</button>
                    <button id="parentSignupTab" class="tab-btn" onclick="switchAuthTab('parent-signup')">Parent Sign Up</button>
                </div>
                
                <!-- Student Login Form -->
                <div id="loginForm" class="auth-form active-form">
                    <input type="email" id="loginEmail" placeholder="Email" required>
                    <input type="password" id="loginPassword" placeholder="Password" required>
                    <button onclick="handleLogin()" class="btn-primary btn-full">Login</button>
                    <button onclick="backToTitle()" class="btn-secondary btn-full">Back</button>
                </div>
                
                <!-- Signup Form -->
                <div id="signupForm" class="auth-form">
                    <div class="form-row">
                        <input type="text" id="signupFirstName" placeholder="First Name" required>
                        <input type="text" id="signupMiddleName" placeholder="Middle Name (Optional)">
                    </div>
                    <input type="text" id="signupLastName" placeholder="Last Name" required>
                    <select id="signupGrade" required>
                        <option value="">Select Your Grade</option>
                        <option value="K">Kindergarten</option>
                        <option value="1">1st Grade</option>
                        <option value="2">2nd Grade</option>
                        <option value="3">3rd Grade</option>
                        <option value="4">4th Grade</option>
                        <option value="5">5th Grade</option>
                        <option value="6">6th Grade</option>
                        <option value="7">7th Grade</option>
                        <option value="8">8th Grade</option>
                        <option value="9">9th Grade</option>
                        <option value="10">10th Grade</option>
                        <option value="11">11th Grade</option>
                        <option value="12">12th Grade</option>
                    </select>
                    <input type="email" id="signupEmail" placeholder="Email" required>
                    <input type="password" id="signupPassword" placeholder="Password (min 6 chars)" required>
                    <input type="password" id="signupConfirmPassword" placeholder="Confirm Password" required>
                    <button onclick="handleSignup()" class="btn-primary btn-full">Create Account</button>
                    <button onclick="backToTitle()" class="btn-secondary btn-full">Back</button>
                </div>

                <!-- Parent Login Form -->
                <div id="parentLoginForm" class="auth-form">
                    <input type="email" id="parentLoginEmail" placeholder="Email" required>
                    <input type="password" id="parentLoginPassword" placeholder="Password" required>
                    <button onclick="handleParentLogin()" class="btn-primary btn-full">Login</button>
                    <button onclick="backToTitle()" class="btn-secondary btn-full">Back</button>
                </div>

                <!-- Parent Signup Form -->
                <div id="parentSignupForm" class="auth-form">
                    <input type="text" id="parentFirstName" placeholder="First Name" required>
                    <input type="text" id="parentLastName" placeholder="Last Name" required>
                    <input type="email" id="parentSignupEmail" placeholder="Email" required>
                    <input type="password" id="parentSignupPassword" placeholder="Password (min 6 chars)" required>
                    <input type="password" id="parentSignupConfirmPassword" placeholder="Confirm Password" required>
                    <button onclick="handleParentSignup()" class="btn-primary btn-full">Create Account</button>
                    <button onclick="backToTitle()" class="btn-secondary btn-full">Back</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Parent Dashboard View -->
    <div id="parentDashboardView" class="container view-hidden">
        <div class="dashboard-header">
            <div class="header-welcome">
                <div class="header-elephant">ğŸ˜</div>
                <div>
                    <h1 id="parentName">Parent Dashboard</h1>
                    <p class="foundation-text">Track Your Child's Learning Progress</p>
                </div>
            </div>
            <div class="dashboard-buttons">
                <button onclick="parentLogout()" class="btn-secondary">Logout</button>
            </div>
        </div>

        <div id="childrenContainer" class="dashboard-grid">
            <!-- Children will be dynamically loaded here -->
        </div>

        <div class="parent-report-section">
            <h2>ğŸ“Š Weekly Reports & Analytics</h2>
            <div id="reportsContainer">
                <!-- Reports will be generated here -->
            </div>
        </div>
    </div>

    <!-- User Management View - REMOVED (no longer needed) -->

    <!-- Dashboard View for Kindergarten -->
    <div id="dashboardView" class="container view-hidden">
        <div class="dashboard-header">
            <div class="header-welcome">
                <div class="header-elephant">ğŸ˜</div>
                <div>
                    <h1 id="studentName"></h1>
                    <p class="foundation-text">Curious Elephant Academy - RS Foundation</p>
                </div>
            </div>
            <div class="points-display">
                <span id="pointsCount">0</span> / 30 Points
                <span id="minigameStatus"></span>
            </div>
            <div class="dashboard-buttons">
                <button onclick="viewLeaderboard()" class="btn-info">ğŸ† Leaderboard</button>
                <button onclick="openShop()" class="btn-warning">ğŸ›ï¸ Game Shop</button>
                <button onclick="toggleAdminPanel()" class="btn-secondary">âš™ï¸ Admin</button>
                <button onclick="logout()" class="btn-secondary">Logout</button>
            </div>
        </div>

        <div class="dashboard-grid">
            <div class="subject-card reading-card">
                <div class="card-elephant">ğŸ˜</div>
                <h2>ğŸ“– Reading</h2>
                <div class="difficulty-buttons">
                    <button onclick="startQuiz('reading', 'easy')">Easy</button>
                    <button onclick="startQuiz('reading', 'medium')">Medium</button>
                    <button onclick="startQuiz('reading', 'hard')">Advanced</button>
                </div>
            </div>

            <div class="subject-card math-card">
                <div class="card-elephant">ğŸ˜</div>
                <h2>ğŸ”¢ Math</h2>
                <div class="difficulty-buttons">
                    <button onclick="startQuiz('math', 'easy')">Easy</button>
                    <button onclick="startQuiz('math', 'medium')">Medium</button>
                    <button onclick="startQuiz('math', 'hard')">Advanced</button>
                </div>
            </div>

            <div class="subject-card science-card">
                <div class="card-elephant">ğŸ˜</div>
                <h2>ğŸ”¬ Science</h2>
                <div class="difficulty-buttons">
                    <button onclick="startQuiz('science', 'easy')">Easy</button>
                    <button onclick="startQuiz('science', 'medium')">Medium</button>
                    <button onclick="startQuiz('science', 'hard')">Advanced</button>
                </div>
            </div>

            <div class="subject-card writing-card">
                <div class="card-elephant">ğŸ˜</div>
                <h2>âœï¸ Writing</h2>
                <div class="difficulty-buttons">
                    <button onclick="startQuiz('writing', 'easy')">Easy</button>
                    <button onclick="startQuiz('writing', 'medium')">Medium</button>
                    <button onclick="startQuiz('writing', 'hard')">Advanced</button>
                </div>
            </div>

            <div class="subject-card history-card">
                <div class="card-elephant">ğŸ˜</div>
                <h2>ğŸ“š History</h2>
                <div class="difficulty-buttons">
                    <button onclick="startQuiz('history', 'easy')">Easy</button>
                    <button onclick="startQuiz('history', 'medium')">Medium</button>
                    <button onclick="startQuiz('history', 'hard')">Advanced</button>
                </div>
            </div>
        </div>

        <div id="minigameCard" class="section" style="display: none;">
            <h2>ğŸ® Minigame (Unlocked!)</h2>
            <p>You've earned 30 points! Click below to play a fun minigame.</p>
            <button onclick="playMinigame()" class="btn-success">Play Minigame</button>
        </div>

        <div id="assignmentsSection" style="display: none;">
            <h2>Creative & Physical Activities (2nd Grade)</h2>
            <div class="dashboard-grid">
                <div class="subject-card">
                    <h3>ğŸ¨ Art</h3>
                    <p>Learn about colors, shapes, and creativity</p>
                    <button onclick="viewAssignments('art')" class="btn-info">View Assignments</button>
                </div>

                <div class="subject-card">
                    <h3>ğŸµ Music</h3>
                    <p>Explore instruments and rhythm</p>
                    <button onclick="viewAssignments('music')" class="btn-info">View Assignments</button>
                </div>

                <div class="subject-card">
                    <h3>âš½ Physical Education</h3>
                    <p>Stay active and healthy</p>
                    <button onclick="viewAssignments('pe')" class="btn-info">View Assignments</button>
                </div>
            </div>
        </div>

        <div id="boardGamesSection" style="display: none;">
            <h2>ğŸ§  Board & Logic Strengthening Games</h2>
            <p>Challenge your mind with strategic games that develop problem-solving and critical thinking skills.</p>
            <button onclick="viewBoardGames()" class="btn-success" style="margin-top: 10px; font-size: 1.1em; padding: 12px 24px;">ğŸ® Play Board Games</button>
        </div>

        <div class="section">
            <h2>ğŸ“š Explore Other Grades</h2>
            <p>See what students in other grades are learning!</p>
            <div class="grade-explorer-grid">
                <button onclick="viewGradeContent('Kindergarten')" class="grade-btn">ğŸ‘¶ Kindergarten</button>
                <button onclick="viewGradeContent('1st grade')" class="grade-btn">1ï¸âƒ£ 1st Grade</button>
                <button onclick="viewGradeContent('2nd grade')" class="grade-btn">2ï¸âƒ£ 2nd Grade</button>
                <button onclick="viewGradeContent('3rd grade')" class="grade-btn">3ï¸âƒ£ 3rd Grade</button>
                <button onclick="viewGradeContent('4th grade')" class="grade-btn">4ï¸âƒ£ 4th Grade</button>
                <button onclick="viewGradeContent('5th grade')" class="grade-btn">5ï¸âƒ£ 5th Grade</button>
                <button onclick="viewGradeContent('6th grade')" class="grade-btn">6ï¸âƒ£ 6th Grade</button>
                <button onclick="viewGradeContent('7th grade')" class="grade-btn">7ï¸âƒ£ 7th Grade</button>
                <button onclick="viewGradeContent('8th grade')" class="grade-btn">8ï¸âƒ£ 8th Grade</button>
                <button onclick="viewGradeContent('9th grade')" class="grade-btn">9ï¸âƒ£ 9th Grade</button>
                <button onclick="viewGradeContent('10th grade')" class="grade-btn">ğŸ”Ÿ 10th Grade</button>
                <button onclick="viewGradeContent('11th grade')" class="grade-btn">1ï¸âƒ£1ï¸âƒ£ 11th Grade</button>
                <button onclick="viewGradeContent('12th grade')" class="grade-btn">1ï¸âƒ£2ï¸âƒ£ 12th Grade</button>
            </div>
        </div>
    </div>

    <!-- Quiz View -->
    <div id="quizView" class="container view-hidden">
        <div class="quiz-header">
            <div style="display: flex; align-items: center; justify-content: space-between; width: 100%;">
                <div style="font-size: 24px;">ğŸ˜</div>
                <h2 id="quizTitle" style="flex: 1; text-align: center;"></h2>
                <div style="font-size: 24px;">ğŸ¯</div>
            </div>
            <div class="quiz-info">
                <span id="questionNumber"></span>
                <span id="userPointsQuiz">Points: 0</span>
            </div>
        </div>

        <div class="quiz-container">
            <div id="questionDisplay"></div>
            <div id="optionsDisplay" class="options-grid"></div>
            <div id="resultDisplay" class="result-hidden"></div>
            <div id="explanationDisplay" class="explanation-hidden"></div>
            <button id="nextBtn" onclick="nextQuestion()" style="display: none;" class="btn-primary">Next Question</button>
            <button onclick="exitQuiz()" class="btn-secondary">Exit Quiz</button>
        </div>
    </div>

    <!-- Minigame View -->
    <div id="minigameView" class="container view-hidden">
        <div class="minigame-header">
            <h1>ğŸ® Memory Match Game</h1>
            <button onclick="exitMinigame()" class="btn-secondary">Exit Game</button>
        </div>
        <div id="gameBoard" class="game-board"></div>
        <div id="gameMessage"></div>
    </div>

    <!-- Shop View -->
    <div id="shopView" class="container view-hidden">
        <div class="shop-header">
            <h1>ğŸ›ï¸ Game Shop</h1>
            <div>
                <span class="user-points">Your Points: <span id="shopPoints">0</span></span>
                <button onclick="closeShop()" class="btn-secondary">Back to Dashboard</button>
            </div>
        </div>
        <div class="games-grid" id="gamesGrid"></div>
    </div>

    <!-- Assignments View -->
    <div id="assignmentsView" class="container view-hidden">
        <div class="assignments-header">
            <h1 id="assignmentsTitle">Assignments</h1>
            <button onclick="closeAssignments()" class="btn-secondary">Back to Dashboard</button>
        </div>
        <div id="assignmentsList" class="assignments-grid">
            <!-- Assignments will be populated here by JavaScript -->
        </div>
    </div>

    <!-- Leaderboard View -->
    <div id="leaderboardView" class="container view-hidden">
        <div class="leaderboard-header">
            <h1>ğŸ† Global Leaderboard</h1>
            <button onclick="closeLeaderboard()" class="btn-secondary">Back to Dashboard</button>
        </div>
        <table id="leaderboardTable">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Name</th>
                    <th>Points</th>
                    <th>Games Played</th>
                </tr>
            </thead>
            <tbody id="leaderboardBody">
            </tbody>
        </table>
    </div>

    <!-- Board Games View -->
    <div id="boardGamesView" class="container view-hidden">
        <div class="board-games-header">
            <h1>ğŸ§  Board & Logic Strengthening Games</h1>
            <div class="points-display">
                <span id="bgPointsCount">0</span> Points Available
            </div>
            <button onclick="closeBoardGames()" class="btn-secondary">Back to Dashboard</button>
        </div>
        <div id="gamesSelectionGrid" class="games-selection-grid">
            <!-- Games will be populated here by JavaScript -->
        </div>
    </div>

    <!-- Game Play View -->
    <div id="gamePlayView" class="container view-hidden">
        <div class="game-play-header">
            <h1 id="currentGameTitle">Game</h1>
            <button onclick="closeGamePlay()" class="btn-secondary">Back to Games</button>
        </div>
        <div id="gamePlayArea" class="game-play-area">
            <!-- Game content will be displayed here -->
        </div>
    </div>

    <!-- Grade Content View -->
    <div id="gradeContentView" class="container view-hidden">
        <div class="grade-content-header">
            <h1 id="gradeContentTitle">Grade Content</h1>
            <button onclick="backToDashboard()" class="btn-secondary">Back to Dashboard</button>
        </div>
        <div id="gradeContentBody" class="grade-content-body">
            <!-- Grade subjects will be populated here -->
        </div>
    </div>

    <!-- Admin Panel View -->
    <div id="adminPanelView" class="container view-hidden">
        <div class="admin-panel" style="max-height: 90vh; overflow-y: auto;">
            <h2>âš™ï¸ Admin Panel (This Device Only)</h2>
            <p style="color: #666; font-size: 12px;">Only visible on this device. Use with caution.</p>
            
            <!-- Tab Navigation -->
            <div style="display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #ddd; flex-wrap: wrap;">
                <button onclick="switchAdminTab('users')" id="tabUsers" class="btn-info" style="padding: 8px 15px; background-color: #3498db; color: white; border: none; cursor: pointer; border-radius: 0;">ğŸ‘¥ Users</button>
                <button onclick="switchAdminTab('parents')" id="tabParents" class="btn-info" style="padding: 8px 15px; background-color: #95a5a6; color: white; border: none; cursor: pointer; border-radius: 0;">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Parents</button>
            </div>

            <!-- Users Section -->
            <div id="usersAdminSection" class="admin-section" style="display: block;">
                <h3>ğŸ‘¥ Registered Users</h3>
                <button onclick="loadAdminUsers()" class="btn-info" style="padding: 8px 15px; margin-bottom: 10px;">ğŸ”„ Refresh Users</button>
                <div id="adminUsersList" style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                        <thead>
                            <tr style="background-color: #f0f0f0; border-bottom: 2px solid #ddd;">
                                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">ID</th>
                                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">First Name</th>
                                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Email</th>
                                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Grade</th>
                                <th style="padding: 10px; text-align: center; border: 1px solid #ddd;">Action</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <tr><td colspan="5" style="text-align: center; padding: 20px;">Loading users...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Parents Section -->
            <div id="parentsAdminSection" class="admin-section" style="display: none;">
                <h3>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Registered Parents</h3>
                <button onclick="loadAdminParents()" class="btn-info" style="padding: 8px 15px; margin-bottom: 10px;">ğŸ”„ Refresh Parents</button>
                <div id="adminParentsList" style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                        <thead>
                            <tr style="background-color: #f0f0f0; border-bottom: 2px solid #ddd;">
                                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">ID</th>
                                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">First Name</th>
                                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Email</th>
                                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Grade</th>
                                <th style="padding: 10px; text-align: center; border: 1px solid #ddd;">Action</th>
                            </tr>
                        </thead>
                        <tbody id="parentsTableBody">
                            <tr><td colspan="5" style="text-align: center; padding: 20px;">Loading parents...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="admin-section">
                <h3>ğŸ‘¤ Your User ID</h3>
                <p id="adminUserId" style="font-weight: bold; padding: 10px; background: #f0f0f0; border-radius: 5px;"></p>
            </div>

            <button onclick="closeAdminPanel()" class="btn-secondary" style="margin-top: 20px;">Close Admin Panel</button>
        </div>
    </div>

    <!-- Edit User Grade Modal -->
    <div id="editUserModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; flex-direction: column;">
        <div style="background: white; padding: 30px; border-radius: 10px; max-width: 400px; width: 90%;">
            <h3>âœï¸ Edit User Grade</h3>
            <p id="editUserName" style="font-weight: bold; margin: 10px 0;"></p>
            <label style="display: block; margin: 15px 0;">
                New Grade:
                <select id="editUserGradeSelect" style="padding: 8px; width: 100%; margin-top: 5px;">
                    <option value="">Select Grade</option>
                    <option value="Kindergarten">Kindergarten</option>
                    <option value="1st grade">1st grade</option>
                    <option value="2nd grade">2nd grade</option>
                    <option value="3rd grade">3rd grade</option>
                    <option value="4th grade">4th grade</option>
                    <option value="5th grade">5th grade</option>
                    <option value="6th grade">6th grade</option>
                </select>
            </label>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button onclick="saveUserGradeEdit()" class="btn-success" style="flex: 1; padding: 10px;">Save</button>
                <button onclick="closeEditUserModal()" class="btn-secondary" style="flex: 1; padding: 10px;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Edit Parent Grade Modal -->
    <div id="editParentModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; flex-direction: column;">
        <div style="background: white; padding: 30px; border-radius: 10px; max-width: 400px; width: 90%;">
            <h3>âœï¸ Edit Parent Grade</h3>
            <p id="editParentName" style="font-weight: bold; margin: 10px 0;"></p>
            <label style="display: block; margin: 15px 0;">
                New Grade:
                <select id="editParentGradeSelect" style="padding: 8px; width: 100%; margin-top: 5px;">
                    <option value="">Select Grade</option>
                    <option value="Kindergarten">Kindergarten</option>
                    <option value="1st grade">1st grade</option>
                    <option value="2nd grade">2nd grade</option>
                    <option value="3rd grade">3rd grade</option>
                    <option value="4th grade">4th grade</option>
                    <option value="5th grade">5th grade</option>
                    <option value="6th grade">6th grade</option>
                </select>
            </label>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button onclick="saveParentGradeEdit()" class="btn-success" style="flex: 1; padding: 10px;">Save</button>
                <button onclick="closeEditParentModal()" class="btn-secondary" style="flex: 1; padding: 10px;">Cancel</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

